---
apiVersion: v1
kind: ConfigMap
metadata:
  name: homepage-configmap
  namespace: default
  labels:
    app.kubernetes.io/name: homepage
data:
  bookmarks.yaml: | # https://gethomepage.dev/configs/bookmarks
    - Bookmarks:
        - YouTube:
            - icon: youtube.png
              abbr: YT
              href: https://youtube.com/
        - Selfh.st:
            - icon: https://selfh.st/content/images/size/w256h256/2023/09/favicon-1.png
              abbr: SH
              href: https://selfh.st/
        - Hacker:
            - icon: https://news.ycombinator.com/y18.svg
              abbr: HN
              href: https://news.ycombinator.com/
  docker.yaml: | # https://gethomepage.dev/configs/docker/
    tower:
        host: ${UNRAID_IP}
        port: 2375
  kubernetes.yaml: | # https://gethomepage.dev/configs/kubernetes/
    mode: cluster
  services.yaml: | # https://gethomepage.dev/configs/services/
    - Plex:
        - Plex:
            icon: plex.png
            href: https://plex.app.tv/
            description: Plex Server
            widget:
              type: plex
              url: http://192.168.5.113:32400
              key: {{HOMEPAGE_VAR_PLEX_TOKEN}}

    - Network:
        - AdGuard:
            icon: sh-adguard-home.png
            href: https://ag.${SECRET_DOMAIN}/
            description: DNS
            widget:
              type: adguard
              url: http://192.168.5.3
              username: {{HOMEPAGE_VAR_AGUSER_TOKEN}}
              password: {{HOMEPAGE_VAR_AGPASS_TOKEN}}

    - Servers:
        - Unifi:
            icon: unifi.png
            href: https://unifi.ui.com/dashboard
            description: UDM-Pro
            widget:
              type: unifi
              fields: ["uptime", "lan_users", "wlan_users"]
              url: https://192.168.1.1
              username: homepage
              password: {{HOMEPAGE_VAR_UNIFI_TOKEN}}
        - Synology:
            icon: synology.png
            href: https://vpn.${SECRET_DOMAIN}:4443/
            description: Network Storage
        - Proxmox 1:
            icon: proxmox.png
            href: https://pxmx1.local.${SECRET_DOMAIN}:8006/
            description: Hypervisor
            widget:
              type: proxmox
              url: https://192.168.5.101:8006
              username: api@pam!homepage
              password: {{HOMEPAGE_VAR_PROXMOX_TOKEN}}
        - Proxmox 2:
            icon: proxmox.png
            href: https://pxmx2.local.${SECRET_DOMAIN}:8006/
            description: Hypervisor
            widget:
              type: proxmox
              url: https://192.168.5.102:8006
              username: api@pam!homepage
              password: {{HOMEPAGE_VAR_PROXMOX_TOKEN}}
        - Proxmox 3:
            icon: proxmox.png
            href: https://pxmx3.local.${SECRET_DOMAIN}:8006/
            description: Hypervisor
            widget:
              type: proxmox
              url: https://192.168.5.103:8006
              username: api@pam!homepage
              password: {{HOMEPAGE_VAR_PROXMOX_TOKEN}}
        - Proxmox Backup:
            icon: proxmox.png
            href: https://pbs.local.${SECRET_DOMAIN}:8007/
            description: Proxmox Backup
            server: tower
            container: proxmox-backup-server
            widget:
              type: proxmoxbackupserver
              url: https://${UNRAID_IP}:8007
              username: admin@pbs!homepage
              password: {{HOMEPAGE_VAR_PBS_TOKEN}}
        - Duplicati:
            icon: duplicati.png
            href: http://${UNRAID_IP}:8200/
            description: B2 Pxmx Backup
            server: tower
            container: duplicati
  settings.yaml: | # https://gethomepage.dev/configs/settings/
    base: https://${GATUS_SUBDOMAIN}.${SECRET_DOMAIN}
    language: en
    target: _self
    color: stone
    background: https://images.unsplash.com/photo-1502790671504-542ad42d5189?auto=format&fit=crop&w=2560&q=80
    backgroundOpacity: 0.5
    statusStyle: ""
    providers:
      openweathermap: openweathermapapikey
      weatherapi: weatherapiapikey
    layout:
      - Bookmarks:
          style: row
          columns: 3
      - Plex:
          style: row
          columns: 3
      - Media:
          style: columns
      - Network:
          style: columns
      - Servers:
          style: columns
  widgets.yaml: | # https://gethomepage.dev/widgets/
    - kubernetes:
        cluster:
          show: true
          cpu: true
          memory: true
          showLabel: true
          label: "cluster"
        nodes:
          show: false
          cpu: true
          memory: true
          showLabel: true
    - resources:
        backend: resources
        expanded: true
        cpu: true
        memory: true
    - openweathermap:
        latitude: {{HOMEPAGE_VAR_OPENWEATHERMAP_LATITUDE}}
        longitude: {{HOMEPAGE_VAR_OPENWEATHERMAP_LONGITUDE}}
        units: imperial
        provider: openweathermap
        apiKey: {{HOMEPAGE_VAR_OPENWEATHERMAP_APIKEY}}
        cache: 5 # Time in minutes to cache API responses, to stay within limits
    - search:
        provider: custom
        url: https://search.${SECRET_DOMAIN}/search?q=
        target: _blank
    - unifi_console:
        url: https://192.168.1.1
        username: homepage
        password: {{HOMEPAGE_VAR_UNIFI_TOKEN}}