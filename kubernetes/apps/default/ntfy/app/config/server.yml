# You need this to be your external domain to receive notifications while afh.
base-url: "https://{{ .Release.Name }}.${SECRET_DOMAIN}"
# If you use IOS then you need to include the following. Not needed for Android + PC
upstream-base-url: "https://ntfy.sh"
# This section creates the cache database and defines the length of time to hold messages
cache-file: /var/cache/ntfy/cache.db
cache-duration: "24h"
cache-startup-queries:
  pragma journal_mode = WAL;
  pragma synchronous = normal;
  pragma temp_store = memory;
  pragma busy_timeout = 15000;
  vacuum;
# This creates a secondary database used to manage your users and permissions
auth-file: /var/cache/ntfy/auth.db
# auth-default-access: "read-write"
auth-default-access: "deny-all"
auth-startup-queries:
  pragma journal_mode = WAL;
  pragma synchronous = normal;
  pragma temp_store = memory;
  pragma busy_timeout = 15000;
  vacuum;
# I assume you also need this for CloudFlared Tunnel (not sure), not just a ProxyManager.
behind-proxy: true
# Useful if you plan to send CCTV snapshots
attachment-cache-dir: "/var/cache/ntfy/attachments"
attachment-total-size-limit: "5G"
attachment-file-size-limit: "15M"
attachment-expiry-duration: "3h"
# Default if 15000. Reset to a safer limit for our restricted use.
global-topic-limit: 50
# Rate limiting in case a message source goes a bit nuts.
visitor-subscription-limit: 10
visitor-attachment-total-size-limit: "50M"
visitor-attachment-daily-bandwidth-limit: "100M"
#iOS PWA https://github.com/binwiederhier/ntfy/issues/276
web-push-public-key: "${WEB_PUSH_PUBLIC_KEY}"
web-push-private-key: "${WEB_PUSH_PRIVATE_KEY}"
web-push-file: /var/cache/ntfy/webpush.db
web-push-email-address: "${WEB_PUSH_EMAIL}"
# https://docs.ntfy.sh/config/#local-only-email
smtp-server-listen: ":5225"
smtp-server-domain: "{{ .Release.Name }}.${SECRET_DOMAIN}"
#smtp-server-addr-prefix: "ntfy-"